const knex = require("knex");
const path = require("path");
const pathToDb = path.resolve("./database/test_database.sqlite");

const {addGuildIdToDb} = require('../db-interactions/guild-db');


const dbClient = knex({
	client: "sqlite3",
	connection: {
		filename: pathToDb,
	},
	useNullAsDefault: true,
});


const addNewGuildId = async (req, res, next) => {
    const {guildId} = req.body;

    const addedGuild = await addGuildIdToDb(dbClient, guildId);

    return res.json({addedGuild});
};

module.exports = { addNewGuildId };
